<!--
  ~ JBoss, a division of Red Hat
  ~ Copyright 2009, Red Hat Middleware, LLC, and individual
  ~ contributors as indicated by the @authors tag. See the
  ~ copyright.txt in the distribution for a full listing of
  ~ individual contributors.
  ~
  ~ This is free software; you can redistribute it and/or modify it
  ~ under the terms of the GNU Lesser General Public License as
  ~ published by the Free Software Foundation; either version 2.1 of
  ~ the License, or (at your option) any later version.
  ~
  ~ This software is distributed in the hope that it will be useful,
  ~ but WITHOUT ANY WARRANTY; without even the implied warranty of
  ~ MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU
  ~ Lesser General Public License for more details.
  ~
  ~ You should have received a copy of the GNU Lesser General Public
  ~ License along with this software; if not, write to the Free
  ~ Software Foundation, Inc., 51 Franklin St, Fifth Floor, Boston, MA
  ~ 02110-1301 USA, or see the FSF site: http://www.fsf.org.
  -->

<ui:decorate template="producerTemplate.xhtml" xmlns="http://www.w3.org/1999/xhtml"
             xmlns:ui="http://java.sun.com/jsf/facelets"
             xmlns:h="http://java.sun.com/jsf/html"
             xmlns:f="http://java.sun.com/jsf/core"
             xmlns:c="http://java.sun.com/jstl/core">

   <ui:param name="title" value="#{i18n.producer_config_title}"/>

   <ui:define name="content">
      <h:form id="producer-form">
         <h:panelGrid columns="2" width="100%">
            <h:selectBooleanCheckbox id="cons-reg-req-check"
                                     value="#{producer.registrationRequiredForFullDescription}"/>
            <h:outputText value="#{i18n.producer_config_sd_requires_reg}"/>
            <h:selectBooleanCheckbox value="#{producer.strictMode}"/>
            <h:outputText value="#{i18n.producer_config_strict}"/>

            <h:selectBooleanCheckbox id="req-reg-check" value="#{producer.registrationRequired}" immediate="true"
                                     onclick="this.form.submit()"
                                     valueChangeListener="#{producer.requireRegistrationListener}"/>
            <h:outputText value="#{i18n.producer_config_requires_reg}"/>

            <h:outputText value="  " rendered="#{producer.registrationRequired}"/>
            <h:panelGroup rendered="#{producer.registrationRequired}">
               <h:panelGrid columns="2" width="100%">
                  <h:outputLabel value="#{i18n.producer_config_reg_policy}" for="registrationPolicy"/>
                  <h:inputText id="registrationPolicy" value="#{producer.registrationPolicyClassName}" size="80"/>

                  <h:outputLabel value="#{i18n.producer_config_reg_prop_validator}" for="validator"
                                 rendered="#{producer.defaultRegistrationPolicy}"/>
                  <h:inputText id="validator" value="#{producer.validatorClassName}" size="80"
                               rendered="#{producer.defaultRegistrationPolicy}"/>

               </h:panelGrid>
            </h:panelGroup>

            <h:outputText value="  " rendered="#{producer.registrationRequired}"/>
            <h:panelGroup rendered="#{producer.registrationRequired}">
               <h:outputText styleClass="portlet-area-header" value="#{i18n.producer_config_reg_props}"/>
               <h:panelGroup styleClass="portlet-area-body">
                  <c:choose>
                     <c:when test="#{!empty producer.registrationProperties}">
                        <h:dataTable id="reg-properties" var="property" width="100%"
                                     value="#{producer.registrationProperties}"
                                     rendered="#{producer.registrationRequired}"
                                     headerClass="portlet-section-header">
                           <h:column>
                              <f:facet name="header">#{i18n.producer_config_reg_prop_name}</f:facet>
                              <h:inputText id="name" value="#{property.nameAsString}" size="30"/>
                           </h:column>
                           <h:column>
                              <f:facet name="header">#{i18n.producer_config_reg_prop_type}</f:facet>
                              <h:selectOneListbox id="producer-list" disabled="true">
                                 <f:selectItems value="#{producer.supportedPropertyTypes}"/>
                              </h:selectOneListbox>
                           </h:column>
                           <h:column>
                              <f:facet name="header">#{i18n.producer_config_reg_prop_label}</f:facet>
                              <h:inputText id="label" value="#{property.label}" size="50"/>
                           </h:column>
                           <h:column>
                              <f:facet name="header">#{i18n.producer_config_reg_prop_hint}</f:facet>
                              <h:inputText id="hint" value="#{property.hint}" size="50"/>
                           </h:column>
                           <h:column>
                              <f:facet name="header">#{i18n.producer_config_reg_prop_action}</f:facet>
                              <h:commandLink id="confirm-delete" action="confirmPropDeletion"
                                             value="#{i18n.producer_config_reg_prop_remove}"
                                             styleClass="portlet-form-button"
                                             actionListener="#{producer.selectProperty}">
                                 <f:param name="propName" value="#{property.nameAsString}"/>
                              </h:commandLink>
                           </h:column>
                        </h:dataTable>
                     </c:when>
                     <c:otherwise>
                        <h:outputText value="#{i18n.producer_config_no_reg_props}"/>
                     </c:otherwise>
                  </c:choose>

                  <h:commandLink id="add-reg-prop" action="#{producer.addRegistrationProperty}"
                                 value="#{i18n.producer_config_add_reg_prop}"
                                 styleClass="portlet-form-button"/>
               </h:panelGroup>
            </h:panelGroup>

            <h:outputText value="  "/>
            <h:panelGroup styleClass="portlet-section-buttonrow">
               <h:commandButton id="save-producer" action="#{producer.save}" value="#{i18n.producer_config_save}"
                                styleClass="portlet-form-button"/>
               <h:commandButton id="reload-producer" action="#{producer.reloadConfiguration}"
                                value="#{i18n.producer_config_cancel}"
                                styleClass="portlet-form-button"/>
            </h:panelGroup>
         </h:panelGrid>
      </h:form>

   </ui:define>
</ui:decorate>